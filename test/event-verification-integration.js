// Copyright (c) 2016-2018 Clearmatics Technologies Ltd
// SPDX-License-Identifier: LGPL-3.0+

// const Web3Utils = require('web3-utils');
// const utils = require('./helpers/utils.js');
// const BN = require('bignumber.js')
// const encoder = require('./helpers/encoder.js')
// const rlp = require('rlp');
//const async = require('async');
// const sha3 = require('js-sha3').keccak_256

// Connect to the Test RPC running
const Web3 = require('web3');
const web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:8545'));

const DxiTriggerPostSellOrder = artifacts.require("DxiTriggerPostSellOrder");

// require('chai')
//  .use(require('chai-as-promised'))
//  .should();


// const TEST_BLOCKHASH2 = "0xbd45d0c114881a14db6bdf9fd98b9df314c27604b91642a06d471ba4cbef9649";
// const TEST_PROOF2 = "0xf9036e00f8642c8083419ce094ceafbfec057d610a7012698eed0b3d1db018636b80847b0cb8391ba073d42067e6892cb64ac172bcb112c8e8e3c6054bb80b9a54494b33370e5cfa72a0485f648e55c219b8382da286f190f39e5486868ccbbbb9bc9ff644619543ac73f86df86b822080b866f8642c8083419ce094ceafbfec057d610a7012698eed0b3d1db018636b80847b0cb8391ba073d42067e6892cb64ac172bcb112c8e8e3c6054bb80b9a54494b33370e5cfa72a0485f648e55c219b8382da286f190f39e5486868ccbbbb9bc9ff644619543ac73f9014301825694b9010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000040000000008000000000000000000000000000000000000000000000000000000000000000000000f83af83894ceafbfec057d610a7012698eed0b3d1db018636be1a092c7f5cfdd1131c5d84e78d0ecdeb41aee5a28c78681a2e7bc6c30a3645d8c1680f9014ff9014c822080b90146f9014301825694b9010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000040000000008000000000000000000000000000000000000000000000000000000000000000000000f83af83894ceafbfec057d610a7012698eed0b3d1db018636be1a092c7f5cfdd1131c5d84e78d0ecdeb41aee5a28c78681a2e7bc6c30a3645d8c1680";

// const TEST_BLOCKHASH = "0x6e13edb9c701353743106de578730b3191d344a05c2e40cfd747bedc912f12cc";
// const TEST_PROOF = "0xf907430af86806843b9aca00830186a094a2e4a61a3d2ce626ba9b3e927cffdb0e4e0bd06d8084457094cc1ca082c3adf1cb22c7260686fd56ea8dc66fbb95717f2e02e4c3702e329fbd57cdada0552e7f3ef6e9f932e08acc7cc15ea6a92d7c11b8ac4a4c0765ce446b3415915ff90236f851a0fb63b3ee11a1ae3b9eb765d44ff793bea3f4dcc1b3851d3d499abeb7858675a180808080808080a07768d7f0c5cf3656a1b885a44f42aa9ac25e728a0ffd42064387f806a9d4c26b8080808080808080f9017180a01766dce2b77f929553bdb672e197ac6bd7a6e1af3bd6631a4761a0f9303de264a011691ee69c053c698656fd0d1d9109fdff8f54c555892e9a7595d9e4b13cdc81a034825307fc63fa81e00dfdb9567cbe216930cc54152008fec1c1a3c0cead50eba03b07413394305087c802b1b33ba2f4adee8ef781e9c44faa0024cfcd8bec8818a04b39fd7ee87b2ca8d0445c7c14e83e281b45df8ee0717e47ddd1586be6aa27aaa06eae234d88c3b3f1dd0696681dde9e3369bdf03b6f56d04ec57c97e65b8e4ae1a0ade94ca299f8a1effdc75566e92fd728c79e856dbaf1a1536e7cf650eb952a4da0c963e18570b2c6c64c47cb4b4ee0bc66b2d7c709585a096abdc22c82665e67b4a0b976edf4c20ccb46e24370ce40d056fa4b30b37f052095cf8e6826ea520376eca024b45b59e4246a74e0a532a172ae6eda1ab7f9f7575389ebcb49f0b3730bc8e2a07e55916b539f96fff5cb000dd364526fb29f46895ca69c6bebb62f200447cec88080808080f86d20b86af86806843b9aca00830186a094a2e4a61a3d2ce626ba9b3e927cffdb0e4e0bd06d8084457094cc1ca082c3adf1cb22c7260686fd56ea8dc66fbb95717f2e02e4c3702e329fbd57cdada0552e7f3ef6e9f932e08acc7cc15ea6a92d7c11b8ac4a4c0765ce446b3415915ff901640183122a96b9010000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020080000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000f85af85894a2e4a61a3d2ce626ba9b3e927cffdb0e4e0bd06de1a027a9902e06885f7c187501d61990eae923b37634a8d6dda55a04dc7078395340a0000000000000000000000000b8844cf76df596e746f360957aa3af954ef51605f90335f851a08e337e40227c1f29eb9be66dcce5738b0ebd7e3fb8f22f3bde4c2c562c47a3e980808080808080a02285cf183e1144e639fd557c61b8f7c9a3c407ea44d900819c24e0bdd043e8c28080808080808080f9017180a072146023fa33354e1aea072971ed85a27934706b44aa09cf1caf7f3fce3f53c4a02843057917ddf23376e770bcadde52ebbddea15eff5cdee7ed48e3b1705105c6a005d7e4bee60ad1bb393c7747e4770c0967abe35d0fe711ed44653665e1ba77d6a004eca1f6f4ca52e78956f277aba13ee78c408d065c12d15094eb9bbcc4d8fc19a09bd8a88adc645ca6cfef48ab9342e0c08e001a5b06c8a075f87795e7d4397152a01bb09aa9e8d5d2c86672a3f2ba2ebb57d82cc02a871097fa144ff6686be301b1a0fad6ed01fdfa90d8568187f3aa23cdb09a512a0438d38dd6fb665e0ffdb78f31a0fa1dd46146f1740adf146d8560ad67d5d99b881d459c6e194abdbc333ef43393a0768dae614a1f5dc5d2d5a5618065c001e808d28bea10b1ae7e8ab1f3aab8bf4aa08bf7adbbd243a63deffa64afd7e90aab7b58311ef7b4c4a824e9fb611786444ca0a93de51ab6adb387212faa7880788c217d2d56cf5baf60c72ca9ec11947afdbf8080808080f9016b20b90167f901640183122a96b9010000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020080000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000f85af85894a2e4a61a3d2ce626ba9b3e927cffdb0e4e0bd06de1a027a9902e06885f7c187501d61990eae923b37634a8d6dda55a04dc7078395340a0000000000000000000000000b8844cf76df596e746f360957aa3af954ef51605";
// const TEST_TXHASH = "0xf75cccc643d1de5d953794999c2e87f5102b9eec9f5900d8c93f9b990ed7472c";


// Blockhash and proof for the EmitEvent 
// txhash: 0x6971f5104a4b7f0575351b1c432f2814c0e306ea29770c8277d8ee19da7617da
// txRoot: 0x21f807836a9178a9cee846ae940221d1bafaba375a1b1bc779eb0596a59bafa7
// receiptRoot: 
//0xb4f87488562ad4381f9f7f6df9890d3b5f70a4b46b9d03db7247b2803b192c6
const TEST_BLOCKHASH = "0xf0b3caae3592d0d95ee07adee339d42eb0810e49ee24cc5dd43cec4bf59ceafe";
const TEST_PROOF = "0xf9037800f8692c85012a05f20083632ea094ceafbfec057d610a7012698eed0b3d1db018636b80847b0cb8391ca0953aa3b5d92e70d2a27beb5c58adcf78cc31b7df2a179f4ead2170bcca7aacd0a04402922c5268cdbe144b9f912136f5ade49d5acdf2b358c4e1f86cd339740b6df872f870822080b86bf8692c85012a05f20083632ea094ceafbfec057d610a7012698eed0b3d1db018636b80847b0cb8391ca0953aa3b5d92e70d2a27beb5c58adcf78cc31b7df2a179f4ead2170bcca7aacd0a04402922c5268cdbe144b9f912136f5ade49d5acdf2b358c4e1f86cd339740b6df9014301825694b9010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000040000000008000000000000000000000000000000000000000000000000000000000000000000000f83af83894ceafbfec057d610a7012698eed0b3d1db018636be1a092c7f5cfdd1131c5d84e78d0ecdeb41aee5a28c78681a2e7bc6c30a3645d8c1680f9014ff9014c822080b90146f9014301825694b9010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000040000000008000000000000000000000000000000000000000000000000000000000000000000000f83af83894ceafbfec057d610a7012698eed0b3d1db018636be1a092c7f5cfdd1131c5d84e78d0ecdeb41aee5a28c78681a2e7bc6c30a3645d8c1680";


contract('Ganache-Ethereum Integration', (accounts) => {
    let dxiTriggerPostSellOrder;

    beforeEach('setup contract for each test', async function () {
       dxiTriggerPostSellOrder = await DxiTriggerPostSellOrder.new();
    })

    describe('Check Proofs ', () => {
        it('Successful Proof check', async () => {
            
            let tx = await dxiTriggerPostSellOrder.verifyAndExecute(TEST_BLOCKHASH, TEST_PROOF);
            console.log(tx);
        })

    })

    })


